<!doctype html>
<html lang="en">
<!-- index.html -->
<head>
  <meta charset="utf-8">
  <title>GateKeeper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icons/door-180.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#111111">
  <link rel="stylesheet" href="styles.css?v=123456">
</head>

<body>
 
  <header class="app-header">
    <img src="icons/door.svg" alt="Door icon" class="app-icon">
    
    <div class="header-text"><h2>Porte<br>Gardien</h2></div>
    
    <!-- <div class="header-text"><h4 style="font-size: 9pt">V0.04<h4 style="font-size: 9pt">18-1-26</h4></div> -->
    
    
    <div class="header-text"><h4 style="font-size: 9pt">V0.05</h4></div>
    <div class="header-text"><h4 style="font-size: 9pt">19-1-26</h4></div>
            
  </header>
 

  <main>
    <section class="toolbartop">
      
      <button id="exportBtn">Export JSON</button>
      <button id="addRowBtn">Add row</button>
      <!-- <label class="import-label">Import JSON<input type="file" id="importFile" accept="application/json"></label> -->
      <!-- <button id="clearBtn">Clear data</button> -->
    </section>
  
    

    <section class="table-wrap">
      <div class="table-wrapper">
        <table id="dataTable" aria-label="Editable table">
          <thead>
            <tr>
              <th>Location</th>
              <th>Number</th>
              <!-- <th>Notes</th>
              <th>Comment</th> -->
            </tr>
          </thead>
              
          <tbody id="tableBody">
            <!-- Rows injected by app.js -->
          </tbody>
        </table>
      </div>
    </section>
    




    <!-- <section class="toolbarbot">
      <button id="exportBtnb">Export JSON</button>
      <button id="addRowBtnb">Add row</button>
    </section>
     -->
        <!-- <p class="hint">Tip: swipe right on a row to see more detail.</p> -->
  </main>
            
  <aside id="detailPanel" class="detail-panel" aria-hidden="true">
    <div class="detail-content">
      <header>
        <h2>Row detail</h2>
        <button id="closeDetailBtn" aria-label="Close detail">Close</button>
      </header>
      <div id="detailFields">
        <!-- populated dynamically -->
      </div>
    </div>  
  </aside>

  <script src="app.js?v=123456"></script>
  
  
  
  <!-- <script>
    // Register Service Worker (required for PWA install/offline on iOS with HTTPS)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script> -->
  


    <!-- JSON debug panel -->
  <div style="background-color: rgb(100, 4, 4); max-width: 280px;">
    <h3>JSON from backend</h3>
    <pre id="output" style="font-size: 10pt";>Loading...</pre>
    <script>
      fetch('http://localhost:10000/load')
        .then(res => res.json())
        .then(data => {
          document.getElementById('output').textContent = JSON.stringify(data, null, 2);
        })
        .catch(err => {
          document.getElementById('output').textContent = 'Error: ' + err;
          console.error(err);
        });
    </script>
  </div> 

</body>
</html>